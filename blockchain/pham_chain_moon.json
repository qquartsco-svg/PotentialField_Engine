[
  {
    "index": 0,
    "timestamp": 1771842487.1042628,
    "data": {
      "name": "GENESIS"
    },
    "hash": "0"
  },
  {
    "index": 1,
    "timestamp": 1771842487.104266,
    "data": {
      "title": "moon.py",
      "author": "GNJz",
      "timestamp": "2026-02-23 21:28:07",
      "hash": "2bbf892be5d635973e14c1a46c6daeda92e9bf45d9e9d7962ba305aa1e18aa32",
      "cid": "QmPLfKU5h3ZXiqoJ8gUg1tKw8exjVy6Wu51ngPuXphMJAU",
      "description": "Phase A: 위성 중력장",
      "score": 0.9994,
      "label": "A_HIGH",
      "signals": {
        "byte": 1.0,
        "text": 1.0,
        "ast": 0.99812382739212,
        "exec": 0.0
      },
      "exec_output": "",
      "raw_bytes": "2222224d6f6f6e2f536174656c6c6974652047726176697479204669656c640a0aeab3a0eca095eb909c20ec99b8ebb68020eca491eba0a5ec9b9028eb8bac2fec9c84ec84b129ec9d8420ec839dec84b1ed9598ec97ac20eab8b0ebb3b820ed8dbced8590ec859c20ed9584eb939cec979020ed95a9ec84b1ed95a9eb8b88eb8ba42e0a0aed9884ec9eac20ec8381ed839c3a0a2d20eb8bacec9d9820ec9c84ecb998eb8a9420eab3a0eca0952028eab3b5eca08420ebafb8eab5aced98842c205068617365204220ec9881ec97ad290a2d20eab3b5eca084ec9db420eb9098eba0a4eba9b420eb8bacec9d9820ec9c84ecb998eab08020eba7a420ec8aa4ed859d20476c6f62616c5374617465eba19c20ec9785eb8db0ec9db4ed8ab8eb9098ec96b4ec95bc20ed95a80a0aec8898ec8b9d3a0a20202020475f6d6f6f6e287829203d202d47202a204d5f6d6f6f6e202a202878202d20785f6d6f6f6e29202f207c7c78202d20785f6d6f6f6e7c7c5e330a0aed95a9ec84b13a0a2020202067287829203d202de2888756287829202b2052287829202b20475f6d6f6f6e2878290a0aeca3bcec9d9820e2809420726f746174696f6e616c5f66756e6320ec8b9ceab7b8eb8b88ecb2983a0a202020206372656174655f6669656c645f776974685f6d6f6f6eec9d9820726f746174696f6e616c5f66756e63eb8a9420ec9c84ecb99820ec9d98eca1b4ed98952052287829eba78c20ebb09bec9d8c2e0a20202020ecbd94eba6acec98aceba6aced9895205228782c76293dcf894a7620eb8a9420506f74656e7469616c4669656c64456e67696e6520eb82b4ebb680286f6d6567615f636f72696f6c697329ec9790ec849c0a20202020537472616e672073706c697474696e67ec9cbceba19c20ecb298eba6aceb9098ebaf80eba19c20ec97aceab8b0ec849c20ed95a9ec84b1ed9598eca78020ec958aec9d8c2e0a0a417574686f723a20474e4a7a202851717561727473290a56657273696f6e3a20302e322e300a2222220a0a696d706f7274206e756d7079206173206e700a66726f6d20747970696e6720696d706f72742043616c6c61626c652c204f7074696f6e616c0a66726f6d2064617461636c617373657320696d706f72742064617461636c6173730a0a0a4064617461636c6173730a636c617373204d6f6f6e3a0a20202020222222eab3a0eca095eb909c20ec99b8ebb68020eca491eba0a5ec9b902028eb8bac2fec9c84ec84b1290a0a20202020ed9884ec9eaceb8a9420ec9c84ecb998eab08020eab3a0eca095eb90a82028eab3b5eca084ec9d802050686173652042ec9790ec849c20eab5aced988420ec9888eca095292e0a20202020eab3b5eca08420eab5aced988420ec8b9c20706f736974696f6eec9d8420eba7a420ec8aa4ed859d20eab0b1ec8ba0ed9598eab1b0eb82982c0a202020204d6f6f6eec9d8420476c6f62616c5374617465ec9d9820657874656e73696f6eec9cbceba19c20eab480eba6aced95b4ec95bc20ed95a82e0a0a20202020417474726962757465733a0a2020202020202020706f736974696f6e3a20eb8bac20ec9c84ecb9982028eab3a0eca095290a20202020202020206d6173733a20eb8bacec9d9820eca788eb9f890a2020202020202020473a20eca491eba0a520ec8381ec88980a2020202020202020736f6674656e696e673a20ec8898ecb99820ec9588eca095ec84b1ec9aa92028723d3020eab7bcecb29820ebb09cec82b020ebb0a9eca780290a202020202222220a20202020706f736974696f6e3a206e702e6e6461727261790a202020206d6173733a20666c6f6174203d20312e300a20202020473a20666c6f6174203d20312e300a20202020736f6674656e696e673a20666c6f6174203d2031652d360a0a20202020646566205f5f706f73745f696e69745f5f2873656c66293a0a202020202020202073656c662e706f736974696f6e203d206e702e61727261792873656c662e706f736974696f6e290a202020202020202069662073656c662e6d617373203c3d20303a0a20202020202020202020202072616973652056616c75654572726f7228224d6f6f6e206d617373206d75737420626520706f73697469766522290a202020202020202069662073656c662e47203c3d20303a0a20202020202020202020202072616973652056616c75654572726f7228224772617669747920636f6e7374616e74206d75737420626520706f73697469766522290a0a0a646566206372656174655f6d6f6f6e5f677261766974795f6669656c64286d6f6f6e3a204d6f6f6e29202d3e2043616c6c61626c655b5b6e702e6e6461727261795d2c206e702e6e6461727261795d3a0a20202020222222eb8bacec9d9820eca491eba0a5ec9ea520ec839dec84b10a0a20202020ec8898ec8b9d3a0a2020202020202020475f6d6f6f6e287829203d202d47202a204d5f6d6f6f6e202a202878202d20785f6d6f6f6e29202f20287c7c78202d20785f6d6f6f6e7c7c202b20ceb5295e330a0a20202020736f6674656e696e67ec9d80207c7c727c7c202b20ceb520ebb0a9ec8b9d2028506c756d6d657220736f6674656e696e67eab3bc20eb8ba4eba684292e0a202020207220e28692203020eab7bcecb29820ebb09cec82b0ec9d8420eba789eb90982c20eba8bc20eab1b0eba6acec9790ec849ceb8a9420ec97adeca09ceab3b120ebb295ecb99920ec9ca0eca7802e0a0a20202020417267733a0a20202020202020206d6f6f6e3a20eb8bac20eab09decb2b40a0a2020202052657475726e733a0a2020202020202020475f6d6f6f6e287829202d3e206e702e6e6461727261792028ec9c84ecb99820ec9d98eca1b420eca491eba0a520ebb2a1ed84b0290a202020202222220a2020202064656620475f6d6f6f6e28783a206e702e6e64617272617929202d3e206e702e6e6461727261793a0a202020202020202078203d206e702e61727261792878290a202020202020202072203d2078202d206d6f6f6e2e706f736974696f6e0a2020202020202020725f6e6f726d203d206e702e6c696e616c672e6e6f726d287229202b206d6f6f6e2e736f6674656e696e670a202020202020202072657475726e202d6d6f6f6e2e47202a206d6f6f6e2e6d617373202a2072202f2028725f6e6f726d202a2a2033290a0a2020202072657475726e20475f6d6f6f6e0a0a0a646566206372656174655f6669656c645f776974685f6d6f6f6e280a202020206772616469656e745f66756e633a2043616c6c61626c655b5b6e702e6e6461727261795d2c206e702e6e6461727261795d2c0a20202020726f746174696f6e616c5f66756e633a204f7074696f6e616c5b43616c6c61626c655b5b6e702e6e6461727261795d2c206e702e6e6461727261795d5d203d204e6f6e652c0a202020206d6f6f6e5f677261766974795f66756e633a204f7074696f6e616c5b43616c6c61626c655b5b6e702e6e6461727261795d2c206e702e6e6461727261795d5d203d204e6f6e650a29202d3e2043616c6c61626c655b5b6e702e6e6461727261795d2c206e702e6e6461727261795d3a0a20202020222222ec9c84ecb99820ec9d98eca1b420ed9584eb939c20ed95a9ec84b13a206772616469656e74202b20726f746174696f6e28706f6c65ed989529202b206d6f6f6e0a0a20202020ec8898ec8b9d3a0a202020202020202067287829203d202de2888756287829202b2052287829202b20475f6d6f6f6e2878290a0a20202020eca3bcec9d983a0a2020202020202020726f746174696f6e616c5f66756e63eb8a94205228782920ec8b9ceab7b8eb8b88ecb298eba78c20ed98b8ed99982e0a2020202020202020ecbd94eba6acec98aceba6aced9895205228782c76293dcf894a7620eb8a9420ec97aceab8b0eab08020ec9584eb8b88eb9dbc20506f74656e7469616c4669656c64456e67696e6520eb82b4ebb6800a2020202020202020286f6d6567615f636f72696f6c6973202b20537472616e672073706c697474696e6729ec9790ec849c20ecb298eba6aceb90a82e0a0a20202020417267733a0a20202020202020206772616469656e745f66756e633a202de2888756287829202d3e206e702e6e6461727261790a2020202020202020726f746174696f6e616c5f66756e633a2052287829202d3e206e702e6e6461727261792028706f6c65ed9895eba78c2c20ec84a0ed839deca081290a20202020202020206d6f6f6e5f677261766974795f66756e633a20475f6d6f6f6e287829202d3e206e702e6e6461727261792028ec84a0ed839deca081290a0a2020202052657475726e733a0a2020202020202020ed95a9ec84b120ed9584eb939c2067287829202d3e206e702e6e6461727261790a202020202222220a2020202064656620636f6d62696e65645f6669656c6428783a206e702e6e64617272617929202d3e206e702e6e6461727261793a0a20202020202020206669656c64203d206772616469656e745f66756e632878290a0a2020202020202020696620726f746174696f6e616c5f66756e63206973206e6f74204e6f6e653a0a202020202020202020202020726f746174696f6e616c203d20726f746174696f6e616c5f66756e632878290a2020202020202020202020206966206c656e286669656c642920213d206c656e28726f746174696f6e616c293a0a2020202020202020202020202020202072616973652056616c75654572726f7228224669656c642064696d656e73696f6e73206d757374206d6174636822290a2020202020202020202020206669656c64203d206669656c64202b20726f746174696f6e616c0a0a20202020202020206966206d6f6f6e5f677261766974795f66756e63206973206e6f74204e6f6e653a0a2020202020202020202020206d6f6f6e5f67726176697479203d206d6f6f6e5f677261766974795f66756e632878290a2020202020202020202020206966206c656e286669656c642920213d206c656e286d6f6f6e5f67726176697479293a0a2020202020202020202020202020202072616973652056616c75654572726f7228224669656c642064696d656e73696f6e73206d757374206d6174636822290a2020202020202020202020206669656c64203d206669656c64202b206d6f6f6e5f677261766974790a0a202020202020202072657475726e206669656c640a0a2020202072657475726e20636f6d62696e65645f6669656c640a0a0a64656620616e616c797a655f6d6f6f6e5f656666656374280a202020206669656c645f776974686f75745f6d6f6f6e3a2043616c6c61626c655b5b6e702e6e6461727261795d2c206e702e6e6461727261795d2c0a202020206669656c645f776974685f6d6f6f6e3a2043616c6c61626c655b5b6e702e6e6461727261795d2c206e702e6e6461727261795d2c0a20202020746573745f706f696e74733a206c6973740a29202d3e20646963743a0a20202020222222eb8bac20ecb694eab08020eca084ed9b8420ed9584eb939c20ebb380ed999420ebb684ec849d0a0a20202020417267733a0a20202020202020206669656c645f776974686f75745f6d6f6f6e3a20eb8bac20ec9786eb8a9420ed9584eb939c0a20202020202020206669656c645f776974685f6d6f6f6e3a20eb8bac20ed8faced95a820ed9584eb939c0a2020202020202020746573745f706f696e74733a20ebb984eab590ed95a020ec9c84ecb99820eba6acec8aa4ed8ab80a0a2020202052657475726e733a0a20202020202020207b226669656c645f646966666572656e6365223a205b2e2e2e5d2c20226d61785f646966666572656e6365223a20666c6f61742c20226176675f646966666572656e6365223a20666c6f61747d0a202020202222220a20202020726573756c7473203d207b0a2020202020202020226669656c645f646966666572656e6365223a205b5d2c0a2020202020202020226d61785f646966666572656e6365223a20302e302c0a2020202020202020226176675f646966666572656e6365223a20302e302c0a202020207d0a0a20202020646966666572656e636573203d205b5d0a20202020666f7220706f696e7420696e20746573745f706f696e74733a0a20202020202020206669656c645f776f203d206669656c645f776974686f75745f6d6f6f6e28706f696e74290a20202020202020206669656c645f77203d206669656c645f776974685f6d6f6f6e28706f696e74290a202020202020202064696666203d206e702e6c696e616c672e6e6f726d286669656c645f77202d206669656c645f776f290a2020202020202020646966666572656e6365732e617070656e642864696666290a2020202020202020726573756c74735b226669656c645f646966666572656e6365225d2e617070656e64287b0a20202020202020202020202022706f696e74223a20706f696e742e746f6c69737428292c0a20202020202020202020202022646966666572656e6365223a20666c6f61742864696666290a20202020202020207d290a0a20202020696620646966666572656e6365733a0a2020202020202020726573756c74735b226d61785f646966666572656e6365225d203d20666c6f6174286d617828646966666572656e63657329290a2020202020202020726573756c74735b226176675f646966666572656e6365225d203d20666c6f6174286e702e6d65616e28646966666572656e63657329290a0a2020202072657475726e20726573756c74730a",
      "raw_text": "\"\"\"Moon/Satellite Gravity Field\n\n고정된 외부 중력원(달/위성)을 생성하여 기본 퍼텐셜 필드에 합성합니다.\n\n현재 상태:\n- 달의 위치는 고정 (공전 미구현, Phase B 영역)\n- 공전이 되려면 달의 위치가 매 스텝 GlobalState로 업데이트되어야 함\n\n수식:\n    G_moon(x) = -G * M_moon * (x - x_moon) / ||x - x_moon||^3\n\n합성:\n    g(x) = -∇V(x) + R(x) + G_moon(x)\n\n주의 — rotational_func 시그니처:\n    create_field_with_moon의 rotational_func는 위치 의존형 R(x)만 받음.\n    코리올리형 R(x,v)=ωJv 는 PotentialFieldEngine 내부(omega_coriolis)에서\n    Strang splitting으로 처리되므로 여기서 합성하지 않음.\n\nAuthor: GNJz (Qquarts)\nVersion: 0.2.0\n\"\"\"\n\nimport numpy as np\nfrom typing import Callable, Optional\nfrom dataclasses import dataclass\n\n\n@dataclass\nclass Moon:\n    \"\"\"고정된 외부 중력원 (달/위성)\n\n    현재는 위치가 고정됨 (공전은 Phase B에서 구현 예정).\n    공전 구현 시 position을 매 스텝 갱신하거나,\n    Moon을 GlobalState의 extension으로 관리해야 함.\n\n    Attributes:\n        position: 달 위치 (고정)\n        mass: 달의 질량\n        G: 중력 상수\n        softening: 수치 안정성용 (r=0 근처 발산 방지)\n    \"\"\"\n    position: np.ndarray\n    mass: float = 1.0\n    G: float = 1.0\n    softening: float = 1e-6\n\n    def __post_init__(self):\n        self.position = np.array(self.position)\n        if self.mass <= 0:\n            raise ValueError(\"Moon mass must be positive\")\n        if self.G <= 0:\n            raise ValueError(\"Gravity constant must be positive\")\n\n\ndef create_moon_gravity_field(moon: Moon) -> Callable[[np.ndarray], np.ndarray]:\n    \"\"\"달의 중력장 생성\n\n    수식:\n        G_moon(x) = -G * M_moon * (x - x_moon) / (||x - x_moon|| + ε)^3\n\n    softening은 ||r|| + ε 방식 (Plummer softening과 다름).\n    r → 0 근처 발산을 막되, 먼 거리에서는 역제곱 법칙 유지.\n\n    Args:\n        moon: 달 객체\n\n    Returns:\n        G_moon(x) -> np.ndarray (위치 의존 중력 벡터)\n    \"\"\"\n    def G_moon(x: np.ndarray) -> np.ndarray:\n        x = np.array(x)\n        r = x - moon.position\n        r_norm = np.linalg.norm(r) + moon.softening\n        return -moon.G * moon.mass * r / (r_norm ** 3)\n\n    return G_moon\n\n\ndef create_field_with_moon(\n    gradient_func: Callable[[np.ndarray], np.ndarray],\n    rotational_func: Optional[Callable[[np.ndarray], np.ndarray]] = None,\n    moon_gravity_func: Optional[Callable[[np.ndarray], np.ndarray]] = None\n) -> Callable[[np.ndarray], np.ndarray]:\n    \"\"\"위치 의존 필드 합성: gradient + rotation(pole형) + moon\n\n    수식:\n        g(x) = -∇V(x) + R(x) + G_moon(x)\n\n    주의:\n        rotational_func는 R(x) 시그니처만 호환.\n        코리올리형 R(x,v)=ωJv 는 여기가 아니라 PotentialFieldEngine 내부\n        (omega_coriolis + Strang splitting)에서 처리됨.\n\n    Args:\n        gradient_func: -∇V(x) -> np.ndarray\n        rotational_func: R(x) -> np.ndarray (pole형만, 선택적)\n        moon_gravity_func: G_moon(x) -> np.ndarray (선택적)\n\n    Returns:\n        합성 필드 g(x) -> np.ndarray\n    \"\"\"\n    def combined_field(x: np.ndarray) -> np.ndarray:\n        field = gradient_func(x)\n\n        if rotational_func is not None:\n            rotational = rotational_func(x)\n            if len(field) != len(rotational):\n                raise ValueError(\"Field dimensions must match\")\n            field = field + rotational\n\n        if moon_gravity_func is not None:\n            moon_gravity = moon_gravity_func(x)\n            if len(field) != len(moon_gravity):\n                raise ValueError(\"Field dimensions must match\")\n            field = field + moon_gravity\n\n        return field\n\n    return combined_field\n\n\ndef analyze_moon_effect(\n    field_without_moon: Callable[[np.ndarray], np.ndarray],\n    field_with_moon: Callable[[np.ndarray], np.ndarray],\n    test_points: list\n) -> dict:\n    \"\"\"달 추가 전후 필드 변화 분석\n\n    Args:\n        field_without_moon: 달 없는 필드\n        field_with_moon: 달 포함 필드\n        test_points: 비교할 위치 리스트\n\n    Returns:\n        {\"field_difference\": [...], \"max_difference\": float, \"avg_difference\": float}\n    \"\"\"\n    results = {\n        \"field_difference\": [],\n        \"max_difference\": 0.0,\n        \"avg_difference\": 0.0,\n    }\n\n    differences = []\n    for point in test_points:\n        field_wo = field_without_moon(point)\n        field_w = field_with_moon(point)\n        diff = np.linalg.norm(field_w - field_wo)\n        differences.append(diff)\n        results[\"field_difference\"].append({\n            \"point\": point.tolist(),\n            \"difference\": float(diff)\n        })\n\n    if differences:\n        results[\"max_difference\"] = float(max(differences))\n        results[\"avg_difference\"] = float(np.mean(differences))\n\n    return results\n"
    },
    "previous_hash": "0",
    "hash": "c7dfd9450ebcafb6283fd4731f5be9660d7b99451bbedaee94a5b6493381442e"
  }
]