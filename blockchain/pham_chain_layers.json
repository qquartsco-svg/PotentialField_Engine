[
  {
    "index": 0,
    "timestamp": 1771930886.8298502,
    "data": {
      "name": "GENESIS"
    },
    "hash": "0"
  },
  {
    "index": 1,
    "timestamp": 1771930886.8298528,
    "data": {
      "title": "layers.py",
      "author": "GNJz",
      "timestamp": "2026-02-24 22:01:26",
      "hash": "84332c0b406bb4c0ec04b5af1f76b4f6e27e7c5ac67dc5c58a0ae2c1efdf6fbc",
      "cid": "CID-unavailable",
      "description": "trunk 레이어 프로토콜: Force/Gauge/Thermo 분리 + TrunkChecker",
      "score": 0.9998,
      "label": "A_HIGH",
      "signals": {
        "byte": 1.0,
        "text": 1.0,
        "ast": 0.9994199535962877,
        "exec": 0.0
      },
      "exec_output": "",
      "raw_bytes": "2222225472756e6b204c617965722050726f746f636f6c7320e2809420ed9e982feab28cec9db4eca7802fec97b4ec97aded959920eba088ec9db4ec96b40a0aeca484eab8b0287472756e6b29eab08020ebb09bec9584ec849c20eca081ebb684ed9598eb8a9420ec84b820eca285eba598ec9d9820eba088ec9db4ec96b42e0aeab08120eba088ec9db4ec96b4eb8a94206475636b20747970696e67ec9cbceba19c20eb8f99ec9e91ed959ceb8ba42028ec8381ec868d20ebb688ed9584ec9a94292e0a0ae2948ce2948020466f726365204c617965727320e29480e29480e29480e29480e29480e2948020ed9e9820ed95adec9d8420ecb694eab0802feab590ecb2b40ae29482202020666f72636528782c20762c20742920e28692206e6461727261790ae29482202020706f74656e7469616c287829202020e2869220666c6f61740ae294820ae2949ce29480204761756765204c6179657220e29480e29480e29480e29480e29480e29480e2948020ec9ab4eb8f99ec9d9820eab3b5eab08420eab79cecb9990ae29482202020726f7461746528762c206474292020e28692206e6461727261792020287c767c20ebb3b4eca1b4290ae29482202020636865636b5f736b65772829202020e2869220626f6f6c2020202020284a5e54203d202d4a3f290ae294820ae2949ce2948020546865726d6f204c6179657220e29480e29480e29480e29480e29480e2948020ec868cec82b0202b20ec9a94eb8f9920eab79cecb9990ae294822020206f755f7374657028762c20682c20726e672920e28692206e6461727261790ae2948220202067616d6d612c207369676d612c2074656d70657261747572652c206d6173730ae29482202020636865636b5f666474282920202020e2869220626f6f6c202020202028cf83c2b2203d2032ceb3542f6d3f290ae294820ae29494e29480205472756e6b436865636b657220e29480e29480e29480e29480e29480e2948020eab7b9ed959c20ec9dbceab480ec84b120ec9e90eb8f9920eab280eca69d0a20202020636865636b5f636f6e736572766174696f6e2c20636865636b5f736b65772c20636865636b5f6664742c20636865636b5f64696d656e73696f6e730a2222220a0a66726f6d205f5f6675747572655f5f20696d706f727420616e6e6f746174696f6e730a696d706f7274206e756d7079206173206e700a66726f6d20747970696e6720696d706f72742043616c6c61626c652c204f7074696f6e616c0a0a0a23203d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d20230a232020466f726365204c61796572730a23203d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d20230a0a636c617373204772616469656e74466f7263653a0a20202020222222ebb3b4eca1b4eba0a53a202de28887562878290a0a202020205628782920e28692202de288875628782920eba5bc20ed9e98ec9cbceba19c20ebb098ed99982e0a202020206669656c645f66756e6320eab08020ec9786ec9cbceba9b420ec8898ecb99820eca491ec8bac20ecb0a8ebb684ec9cbceba19c20eab384ec82b02e0a202020202222220a0a20202020646566205f5f696e69745f5f280a202020202020202073656c662c0a2020202020202020706f74656e7469616c5f66756e633a2043616c6c61626c655b5b6e702e6e6461727261795d2c20666c6f61745d2c0a20202020202020206669656c645f66756e633a204f7074696f6e616c5b43616c6c61626c655b5b6e702e6e6461727261795d2c206e702e6e6461727261795d5d203d204e6f6e652c0a2020202020202020657073696c6f6e3a20666c6f6174203d2031652d362c0a20202020293a0a202020202020202073656c662e706f74656e7469616c5f66756e63203d20706f74656e7469616c5f66756e630a202020202020202073656c662e6669656c645f66756e63203d206669656c645f66756e630a202020202020202073656c662e657073696c6f6e203d20657073696c6f6e0a0a2020202064656620666f7263652873656c662c20783a206e702e6e6461727261792c20763a206e702e6e6461727261792c20743a20666c6f617429202d3e206e702e6e6461727261793a0a202020202020202069662073656c662e6669656c645f66756e63206973206e6f74204e6f6e653a0a20202020202020202020202072657475726e2073656c662e6669656c645f66756e632878290a202020202020202067726164203d206e702e7a65726f735f6c696b652878290a2020202020202020666f72206920696e2072616e6765286c656e287829293a0a202020202020202020202020785f70203d20782e636f707928293b20785f705b695d202b3d2073656c662e657073696c6f6e0a202020202020202020202020785f6d203d20782e636f707928293b20785f6d5b695d202d3d2073656c662e657073696c6f6e0a202020202020202020202020677261645b695d203d202873656c662e706f74656e7469616c5f66756e6328785f7029202d2073656c662e706f74656e7469616c5f66756e6328785f6d2929202f2028322e30202a2073656c662e657073696c6f6e290a202020202020202072657475726e202d677261640a0a2020202064656620706f74656e7469616c2873656c662c20783a206e702e6e64617272617929202d3e20666c6f61743a0a202020202020202072657475726e2073656c662e706f74656e7469616c5f66756e632878290a0a0a636c61737320496e6a656374696f6e466f7263653a0a20202020222222ebb984ebb3b4eca1b420ec99b8ebb68020ed9e983a204928782c20762c2074290a0a20202020ec9790eb8488eca780eba5bc20eab3b5eab889ed9598eab1b0eb829820ebb9bceb8a9420ec99b8ebb68020eab5aceb8f992e0a20202020706f74656e7469616c2829203d20302028ebb984ebb3b4eca1b4ec9db4ebaf80eba19c20ed8dbced8590ec859c20ec9786ec9d8c292e0a202020202222220a0a20202020646566205f5f696e69745f5f2873656c662c20696e6a656374696f6e5f66756e633a2043616c6c61626c65293a0a202020202020202073656c662e696e6a656374696f6e5f66756e63203d20696e6a656374696f6e5f66756e630a0a2020202064656620666f7263652873656c662c20783a206e702e6e6461727261792c20763a206e702e6e6461727261792c20743a20666c6f617429202d3e206e702e6e6461727261793a0a202020202020202072657475726e206e702e617361727261792873656c662e696e6a656374696f6e5f66756e6328782c20762c207429290a0a2020202064656620706f74656e7469616c2873656c662c20783a206e702e6e64617272617929202d3e20666c6f61743a0a202020202020202072657475726e20302e300a0a0a636c6173732043616c6c6261636b466f7263653a0a20202020222222ebb294ec9aa920ecbd9cebb0b120ed9e9820286c656761637920726f746174696f6e616c5f66756e6320ed98b8ed9998290a0a202020206628782c20762920eb9890eb8a94206628782920ed9895ed839cec9d9820ecbd9cebb0b1ec9d8420ed9e98ec9cbceba19c20eab090ec8bbceb8ba42e0a2020202073796d706c65637469632045756c657220eab2bdeba19cec9790ec849ceba78c20ec82acec9aa92e0a202020202222220a0a20202020646566205f5f696e69745f5f2873656c662c2063616c6c6261636b3a2043616c6c61626c65293a0a202020202020202073656c662e5f63616c6c6261636b203d2063616c6c6261636b0a0a2020202064656620666f7263652873656c662c20783a206e702e6e6461727261792c20763a206e702e6e6461727261792c20743a20666c6f617429202d3e206e702e6e6461727261793a0a20202020202020207472793a0a20202020202020202020202072657475726e206e702e617361727261792873656c662e5f63616c6c6261636b28782c207629290a202020202020202065786365707420547970654572726f723a0a20202020202020202020202072657475726e206e702e617361727261792873656c662e5f63616c6c6261636b287829290a0a2020202064656620706f74656e7469616c2873656c662c20783a206e702e6e64617272617929202d3e20666c6f61743a0a202020202020202072657475726e20302e300a0a0a23203d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d20230a2320204761756765204c617965720a23203d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d20230a0a636c61737320436f72696f6c697347617567653a0a20202020222222ecbd94eba6acec98aceba6ac20ed9a8ceca0843a2065787028cf894a647429c2b7760a0a20202020324420ed8f89eba9b42028617869735b305d2c20617869735b315d29ec9790ec849c20eca095ed999520ed9a8ceca0842e0a202020204a203d205b5b302c202d315d2c205b312c20305d5d20e28692204a5e54203d202d4a20e2869220ec9790eb8488eca78020ebb3b4eca1b420ec8898ed9599eca08120ebb3b4ec9ea52e0a20202020eb8298eba8b8eca78020ecb0a8ec9b90ec9d8020ebb688ebb3802e0a202020202222220a0a20202020646566205f5f696e69745f5f2873656c662c206f6d6567613a20666c6f61742c20617869733a207475706c65203d2028302c203129293a0a202020202020202073656c662e6f6d656761203d206f6d6567610a202020202020202073656c662e61786973203d20617869730a0a2020202064656620726f746174652873656c662c20763a206e702e6e6461727261792c2064743a20666c6f617429202d3e206e702e6e6461727261793a0a20202020202020207468657461203d2073656c662e6f6d656761202a2064740a2020202020202020765f726f74203d20762e636f707928290a2020202020202020692c206a203d2073656c662e617869730a2020202020202020632c2073203d206e702e636f73287468657461292c206e702e73696e287468657461290a202020202020202076692c20766a203d20765b695d2c20765b6a5d0a2020202020202020765f726f745b695d203d2063202a207669202d2073202a20766a0a2020202020202020765f726f745b6a5d203d2073202a207669202b2063202a20766a0a202020202020202072657475726e20765f726f740a0a2020202064656620636865636b5f736b65772873656c6629202d3e20626f6f6c3a0a20202020202020202222224a5e54203d202d4a20ec9db8eab0803f20436f72696f6c69734761756765eb8a9420eab5aceca1b0eca081ec9cbceba19c20ed95adec838120547275652e2222220a202020202020202072657475726e20547275650a0a0a636c617373204e756c6c47617567653a0a20202020222222ed9a8ceca08420ec9786ec9d8c2e20537472616e672073706c697474696e67ec9d98205220ec8aa4ed859dec9db4206e6f2d6f702e2222220a0a2020202064656620726f746174652873656c662c20763a206e702e6e6461727261792c2064743a20666c6f617429202d3e206e702e6e6461727261793a0a202020202020202072657475726e20760a0a2020202064656620636865636b5f736b65772873656c6629202d3e20626f6f6c3a0a202020202020202072657475726e20547275650a0a0a23203d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d20230a232020546865726d6f204c617965720a23203d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d20230a0a636c617373204c616e676576696e546865726d6f3a0a202020202222224c616e676576696e20ec868cec82b0202b20ec9a94eb8f993a204f2d5520657861637420737465700a0a202020207620e2869220655e7b2dceb3687d2076202b20616d70286829c2b7cebe0a0a20202020616d70286829203d20cf8320e2889a282831202d20655e7b2d32ceb3687d29202f202832ceb329292c2020ceb3e28692303a20cf83e2889a680a0a202020204644543a20cf83c2b2203d2032ceb3542f6d20202874656d706572617475726520ec84a4eca09520ec8b9c290a202020204d616e75616c3a206e6f6973655f7369676d615f6f76657272696465203e203020ec9db4eba9b420cf8320eca781eca09120eca780eca0950a202020204f66663a20eb919820eb8ba420ec9786ec9cbceba9b420cf83203d20300a202020202222220a0a20202020646566205f5f696e69745f5f280a202020202020202073656c662c0a202020202020202067616d6d613a20666c6f6174203d20302e302c0a202020202020202074656d70657261747572653a204f7074696f6e616c5b666c6f61745d203d204e6f6e652c0a20202020202020206d6173733a20666c6f6174203d20312e302c0a20202020202020206e6f6973655f7369676d615f6f766572726964653a20666c6f6174203d20302e302c0a20202020293a0a202020202020202073656c662e5f67616d6d61203d20666c6f61742867616d6d61290a202020202020202073656c662e5f74656d7065726174757265203d2074656d70657261747572650a202020202020202073656c662e5f6d617373203d20666c6f6174286d617373290a202020202020202073656c662e5f6e6f6973655f7369676d615f6f76657272696465203d20666c6f6174286e6f6973655f7369676d615f6f76657272696465290a0a202020204070726f70657274790a202020206465662067616d6d612873656c6629202d3e20666c6f61743a0a202020202020202072657475726e2073656c662e5f67616d6d610a0a202020204070726f70657274790a20202020646566207369676d612873656c6629202d3e20666c6f61743a0a202020202020202069662073656c662e5f6e6f6973655f7369676d615f6f76657272696465203e20303a0a20202020202020202020202072657475726e2073656c662e5f6e6f6973655f7369676d615f6f766572726964650a202020202020202069662073656c662e5f74656d7065726174757265206973206e6f74204e6f6e6520616e642073656c662e5f74656d7065726174757265203e203020616e642073656c662e5f67616d6d61203e20303a0a20202020202020202020202072657475726e20666c6f6174286e702e7371727428322e30202a2073656c662e5f67616d6d61202a2073656c662e5f74656d7065726174757265202f2073656c662e5f6d61737329290a202020202020202072657475726e20302e300a0a202020204070726f70657274790a20202020646566206e6f6973655f6d6f64652873656c6629202d3e207374723a0a202020202020202069662073656c662e5f6e6f6973655f7369676d615f6f76657272696465203e20303a0a20202020202020202020202072657475726e20226d616e75616c220a202020202020202069662073656c662e5f74656d7065726174757265206973206e6f74204e6f6e6520616e642073656c662e5f74656d7065726174757265203e203020616e642073656c662e5f67616d6d61203e20303a0a20202020202020202020202072657475726e2022666474220a202020202020202072657475726e20226f6666220a0a202020204070726f70657274790a202020206465662074656d70657261747572652873656c6629202d3e204f7074696f6e616c5b666c6f61745d3a0a202020202020202072657475726e2073656c662e5f74656d70657261747572650a0a202020204070726f70657274790a20202020646566206d6173732873656c6629202d3e20666c6f61743a0a202020202020202072657475726e2073656c662e5f6d6173730a0a20202020646566206f755f737465702873656c662c20763a206e702e6e6461727261792c20683a20666c6f61742c20726e673a206e702e72616e646f6d2e47656e657261746f7229202d3e206e702e6e6461727261793a0a20202020202020202222224f2d55206578616374207374657020666f722074696d6520696e74657276616c20682e2222220a20202020202020207369676d61203d2073656c662e7369676d610a202020202020202067616d6d61203d2073656c662e5f67616d6d610a0a20202020202020206465636179203d206e702e657870282d67616d6d61202a2068292069662067616d6d61203e203020656c736520312e300a2020202020202020765f6e6577203d2076202a2064656361790a0a20202020202020206966207369676d61203e20303a0a20202020202020202020202069662067616d6d61203e20303a0a20202020202020202020202020202020616d70203d207369676d61202a206e702e737172742828312e30202d206e702e657870282d322e30202a2067616d6d61202a20682929202f2028322e30202a2067616d6d6129290a202020202020202020202020656c73653a0a20202020202020202020202020202020616d70203d207369676d61202a206e702e737172742868290a202020202020202020202020765f6e6577203d20765f6e6577202b20616d70202a20726e672e7374616e646172645f6e6f726d616c28762e7368617065290a0a202020202020202072657475726e20765f6e65770a0a2020202064656620636865636b5f6664742873656c6629202d3e20626f6f6c3a0a2020202020202020222222cf83c2b2203d2032ceb3542f6d20ec9db8eca78020eab280eca69d2e206d616e75616cec9db4eba9b42046445420ebafb8eca081ec9aa92e2222220a202020202020202069662073656c662e6e6f6973655f6d6f6465203d3d20226d616e75616c223a0a20202020202020202020202072657475726e20547275650a202020202020202069662073656c662e6e6f6973655f6d6f6465203d3d20226f6666223a0a20202020202020202020202072657475726e20547275650a20202020202020206578706563746564203d206e702e7371727428322e30202a2073656c662e5f67616d6d61202a2073656c662e5f74656d7065726174757265202f2073656c662e5f6d617373290a202020202020202072657475726e206162732873656c662e7369676d61202d20657870656374656429203c2031652d31320a0a0a636c617373204e756c6c546865726d6f3a0a20202020222222ec868cec82b02fec9a94eb8f9920ec9786ec9d8c2e20eab2b0eca095eba1a0eca08120ebb3b4eca1b4eab3842e2222220a0a2020202067616d6d61203d20302e300a202020207369676d61203d20302e300a202020206e6f6973655f6d6f6465203d20226f6666220a2020202074656d7065726174757265203d204e6f6e650a202020206d617373203d20312e300a0a20202020646566206f755f737465702873656c662c20763a206e702e6e6461727261792c20683a20666c6f61742c20726e673a206e702e72616e646f6d2e47656e657261746f7229202d3e206e702e6e6461727261793a0a202020202020202072657475726e20760a0a2020202064656620636865636b5f6664742873656c6629202d3e20626f6f6c3a0a202020202020202072657475726e20547275650a0a0a23203d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d20230a232020eab7b9ed959c20ec9dbceab480ec84b120ec9e90eb8f9920eab280eca69d20285472756e6b436865636b6572290a23203d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d20230a0a636c617373205472756e6b436865636b65723a0a20202020222222eca484eab8b0ec9d9820ebacbceba6aceca08120ebacb4eab2b0ec84b1ec9d8420eab280eca69ded959ceb8ba42e0a0a2020202034eb8c8020ecb2b4ed81ac3a0a202020202020412e20636f6e736572766174696f6e20e2809420ceb33d302c20cf833d302c20493d3020e2869220644520e2898820300a202020202020422e20736b65772020202020202020e28094204a5e54203d202d4a2020286761756765eab08020ec9790eb8488eca780eba5bc20eba78ceb93a4eca78020ec958aeb8a94eab080290a202020202020432e20666474202020202020202020e2809420cf83c2b2203d2032ceb3542f6d202028ec97b4eca08120ec9dbceab480ec84b1290a202020202020442e2064696d656e73696f6e732020e2809420737461746520ed81aceab8b0ec9980206c6179657220ecb69ceba0a520ed81aceab8b020eca095ed95a90a0a2020202041eb8a9420ec8b9cebaeaceba088ec9db4ec8598ec9db420ed9584ec9a94ed9598ebaf80eba19c20ebaa85ec8b9ceca08120ed98b8ecb69c2e0a20202020422c20432c2044eb8a9420ec839dec84b120ec8b9c20ec9e90eb8f9920ec8ba4ed968920eab080eb8aa52e0a202020202222220a0a20202020407374617469636d6574686f640a2020202064656620636865636b5f736b65772867617567655f6c6179657229202d3e20646963743a0a2020202020202020222222eab28cec9db4eca78020eba088ec9db4ec96b4ec9d9820ec8aa4ed819020eb8c80ecb9adec84b120eab280eca69d2e2222220a20202020202020206f6b203d2067617567655f6c617965722e636865636b5f736b657728290a202020202020202072657475726e207b22636865636b223a2022736b65775f73796d6d65747279222c202270617373223a206f6b2c0a202020202020202020202020202020202264657461696c223a20224a5e54203d202d4a2028656e657267792d70726573657276696e672922206966206f6b20656c736520225741524e494e473a206761756765206d617920627265616b20656e6572677920636f6e736572766174696f6e227d0a0a20202020407374617469636d6574686f640a2020202064656620636865636b5f66647428746865726d6f5f6c6179657229202d3e20646963743a0a2020202020202020222222ec97b4ec97aded959920eba088ec9db4ec96b4ec9d982046445420ec9dbceab480ec84b120eab280eca69d2e2222220a20202020202020206f6b203d20746865726d6f5f6c617965722e636865636b5f66647428290a202020202020202072657475726e207b22636865636b223a20226664745f636f6e73697374656e6379222c202270617373223a206f6b2c0a202020202020202020202020202020202264657461696c223a2066226d6f64653d7b746865726d6f5f6c617965722e6e6f6973655f6d6f64657d2c20cf833d7b746865726d6f5f6c617965722e7369676d613a2e36667d2c20ceb33d7b746865726d6f5f6c617965722e67616d6d613a2e34667d227d0a0a20202020407374617469636d6574686f640a2020202064656620636865636b5f64696d656e73696f6e732873746174655f64696d3a20696e742c20666f7263655f6c61796572733a206c6973742c2067617567655f6c617965722c20746865726d6f5f6c6179657229202d3e20646963743a0a2020202020202020222222ecb0a8ec9b9020eca095ed95a9ec84b120eab280eca69d2e2222220a2020202020202020785f74657374203d206e702e7a65726f732873746174655f64696d290a2020202020202020765f74657374203d206e702e7a65726f732873746174655f64696d290a2020202020202020726e67203d206e702e72616e646f6d2e64656661756c745f726e672830290a0a20202020202020206572726f7273203d205b5d0a2020202020202020666f7220692c20666c20696e20656e756d657261746528666f7263655f6c6179657273293a0a2020202020202020202020207472793a0a2020202020202020202020202020202066203d20666c2e666f72636528785f746573742c20765f746573742c20302e30290a202020202020202020202020202020206966206c656e28662920213d2073746174655f64696d3a0a20202020202020202020202020202020202020206572726f72732e617070656e64286622666f7263655f6c617965725b7b697d5d3a206f75747075742064696d207b6c656e2866297d20213d2073746174652064696d207b73746174655f64696d7d22290a20202020202020202020202065786365707420457863657074696f6e20617320653a0a202020202020202020202020202020206572726f72732e617070656e64286622666f7263655f6c617965725b7b697d5d3a207b657d22290a0a20202020202020207472793a0a202020202020202020202020765f726f74203d2067617567655f6c617965722e726f7461746528765f746573742c20302e3031290a2020202020202020202020206966206c656e28765f726f742920213d2073746174655f64696d3a0a202020202020202020202020202020206572726f72732e617070656e6428662267617567655f6c617965723a206f75747075742064696d207b6c656e28765f726f74297d20213d2073746174652064696d207b73746174655f64696d7d22290a202020202020202065786365707420457863657074696f6e20617320653a0a2020202020202020202020206572726f72732e617070656e6428662267617567655f6c617965723a207b657d22290a0a20202020202020207472793a0a202020202020202020202020765f6f75203d20746865726d6f5f6c617965722e6f755f7374657028765f746573742c20302e30312c20726e67290a2020202020202020202020206966206c656e28765f6f752920213d2073746174655f64696d3a0a202020202020202020202020202020206572726f72732e617070656e64286622746865726d6f5f6c617965723a206f75747075742064696d207b6c656e28765f6f75297d20213d2073746174652064696d207b73746174655f64696d7d22290a202020202020202065786365707420457863657074696f6e20617320653a0a2020202020202020202020206572726f72732e617070656e64286622746865726d6f5f6c617965723a207b657d22290a0a20202020202020206f6b203d206c656e286572726f727329203d3d20300a202020202020202072657475726e207b22636865636b223a202264696d656e73696f6e73222c202270617373223a206f6b2c0a202020202020202020202020202020202264657461696c223a2022616c6c206c6179657273206167726565206f6e2064696d22206966206f6b20656c736520223b20222e6a6f696e286572726f7273297d0a0a20202020407374617469636d6574686f640a2020202064656620636865636b5f636f6e736572766174696f6e28656e67696e652c20696e697469616c5f73746174652c206e5f73746570733a20696e74203d2035303029202d3e20646963743a0a2020202020202020222222ec9790eb8488eca78020ebb3b4eca1b420eab280eca69d2028ebb3b4eca1b4eab38420eab7b9ed959c292e0a0a2020202020202020ec9b90ebb3b820656e67696e65ec9d9820746865726d6feba5bc204e756c6c546865726d6feba19c2c20696e6a656374696f6e20666f72636573eba5bc20eca09ceab1b0ed959c20eb92a40a2020202020202020ec9790eb8488eca780206472696674eba5bc20ecb8a1eca095ed959ceb8ba42e20eab8b0eca1b420656e67696e65ec9d8420ebb380eab2bded9598eca78020ec958aeb8a94eb8ba42e0a0a2020202020202020ec9db420eab280eca69dec9d8020ebb984ec9aa9ec9db420eb8692ec9cbcebaf80eba19c20ebaa85ec8b9ceca08120ed98b8ecb69ceba78c2e0a20202020202020202222220a202020202020202066726f6d20636f707920696d706f72742064656570636f70790a0a2020202020202020656e675f636f7079203d2064656570636f707928656e67696e65290a2020202020202020656e675f636f70792e5f746865726d6f203d204e756c6c546865726d6f28290a2020202020202020656e675f636f70792e5f666f7263655f6c6179657273203d205b666c20666f7220666c20696e20656e675f636f70792e5f666f7263655f6c61796572730a202020202020202020202020202020202020202020202020202020202020202020206966206973696e7374616e636528666c2c204772616469656e74466f726365295d0a0a20202020202020207374617465203d20696e697469616c5f73746174652e636f707928646565703d46616c7365290a20202020202020204530203d2073746174652e656e657267790a2020202020202020656e657267696573203d205b45305d0a0a2020202020202020666f72205f20696e2072616e6765286e5f7374657073293a0a2020202020202020202020207374617465203d20656e675f636f70792e757064617465287374617465290a202020202020202020202020656e6572676965732e617070656e642873746174652e656e65726779290a0a2020202020202020656e657267696573203d206e702e617272617928656e657267696573290a20202020202020206d61785f6472696674203d20666c6f6174286e702e6d6178286e702e61627328656e657267696573202d2045302929290a202020202020202072656c5f6472696674203d206d61785f6472696674202f20616273284530292069662061627328453029203e2031652d313220656c7365206d61785f64726966740a0a20202020202020206f6b203d2072656c5f6472696674203c20302e30310a202020202020202072657475726e207b22636865636b223a2022636f6e736572766174696f6e222c202270617373223a206f6b2c0a202020202020202020202020202020202264657461696c223a2066226d6178207cce94457c2f45e28280203d207b72656c5f64726966743a2e32657d20286e3d7b6e5f73746570737d29227d0a0a20202020407374617469636d6574686f640a202020206465662072756e5f616c6c28656e67696e652c20696e697469616c5f73746174653d4e6f6e6529202d3e206c6973743a0a2020202020202020222222ebaaa8eb93a020eca095eca08120ecb2b4ed81ac20ec8ba4ed96892e20636f6e736572766174696f6eec9d8020696e697469616c5f7374617465eab08020ec9e88ec9d8420eb958ceba78c2e2222220a2020202020202020726573756c7473203d205b5d0a2020202020202020726573756c74732e617070656e64285472756e6b436865636b65722e636865636b5f736b657728656e67696e652e5f676175676529290a2020202020202020726573756c74732e617070656e64285472756e6b436865636b65722e636865636b5f66647428656e67696e652e5f746865726d6f29290a0a2020202020202020696620696e697469616c5f7374617465206973206e6f74204e6f6e653a0a20202020202020202020202064696d203d206c656e28696e697469616c5f73746174652e73746174655f766563746f7229202f2f20320a202020202020202020202020726573756c74732e617070656e64285472756e6b436865636b65722e636865636b5f64696d656e73696f6e73280a2020202020202020202020202020202064696d2c20656e67696e652e5f666f7263655f6c61796572732c20656e67696e652e5f67617567652c20656e67696e652e5f746865726d6f29290a202020202020202020202020726573756c74732e617070656e64285472756e6b436865636b65722e636865636b5f636f6e736572766174696f6e28656e67696e652c20696e697469616c5f737461746529290a0a202020202020202072657475726e20726573756c74730a",
      "raw_text": "\"\"\"Trunk Layer Protocols — 힘/게이지/열역학 레이어\n\n줄기(trunk)가 받아서 적분하는 세 종류의 레이어.\n각 레이어는 duck typing으로 동작한다 (상속 불필요).\n\n┌─ Force Layers ────── 힘 항을 추가/교체\n│   force(x, v, t) → ndarray\n│   potential(x)   → float\n│\n├─ Gauge Layer ─────── 운동의 공간 규칙\n│   rotate(v, dt)  → ndarray  (|v| 보존)\n│   check_skew()   → bool     (J^T = -J?)\n│\n├─ Thermo Layer ────── 소산 + 요동 규칙\n│   ou_step(v, h, rng) → ndarray\n│   gamma, sigma, temperature, mass\n│   check_fdt()    → bool     (σ² = 2γT/m?)\n│\n└─ TrunkChecker ────── 극한 일관성 자동 검증\n    check_conservation, check_skew, check_fdt, check_dimensions\n\"\"\"\n\nfrom __future__ import annotations\nimport numpy as np\nfrom typing import Callable, Optional\n\n\n# ================================================================== #\n#  Force Layers\n# ================================================================== #\n\nclass GradientForce:\n    \"\"\"보존력: -∇V(x)\n\n    V(x) → -∇V(x) 를 힘으로 반환.\n    field_func 가 없으면 수치 중심 차분으로 계산.\n    \"\"\"\n\n    def __init__(\n        self,\n        potential_func: Callable[[np.ndarray], float],\n        field_func: Optional[Callable[[np.ndarray], np.ndarray]] = None,\n        epsilon: float = 1e-6,\n    ):\n        self.potential_func = potential_func\n        self.field_func = field_func\n        self.epsilon = epsilon\n\n    def force(self, x: np.ndarray, v: np.ndarray, t: float) -> np.ndarray:\n        if self.field_func is not None:\n            return self.field_func(x)\n        grad = np.zeros_like(x)\n        for i in range(len(x)):\n            x_p = x.copy(); x_p[i] += self.epsilon\n            x_m = x.copy(); x_m[i] -= self.epsilon\n            grad[i] = (self.potential_func(x_p) - self.potential_func(x_m)) / (2.0 * self.epsilon)\n        return -grad\n\n    def potential(self, x: np.ndarray) -> float:\n        return self.potential_func(x)\n\n\nclass InjectionForce:\n    \"\"\"비보존 외부 힘: I(x, v, t)\n\n    에너지를 공급하거나 빼는 외부 구동.\n    potential() = 0 (비보존이므로 퍼텐셜 없음).\n    \"\"\"\n\n    def __init__(self, injection_func: Callable):\n        self.injection_func = injection_func\n\n    def force(self, x: np.ndarray, v: np.ndarray, t: float) -> np.ndarray:\n        return np.asarray(self.injection_func(x, v, t))\n\n    def potential(self, x: np.ndarray) -> float:\n        return 0.0\n\n\nclass CallbackForce:\n    \"\"\"범용 콜백 힘 (legacy rotational_func 호환)\n\n    f(x, v) 또는 f(x) 형태의 콜백을 힘으로 감싼다.\n    symplectic Euler 경로에서만 사용.\n    \"\"\"\n\n    def __init__(self, callback: Callable):\n        self._callback = callback\n\n    def force(self, x: np.ndarray, v: np.ndarray, t: float) -> np.ndarray:\n        try:\n            return np.asarray(self._callback(x, v))\n        except TypeError:\n            return np.asarray(self._callback(x))\n\n    def potential(self, x: np.ndarray) -> float:\n        return 0.0\n\n\n# ================================================================== #\n#  Gauge Layer\n# ================================================================== #\n\nclass CoriolisGauge:\n    \"\"\"코리올리 회전: exp(ωJdt)·v\n\n    2D 평면 (axis[0], axis[1])에서 정확 회전.\n    J = [[0, -1], [1, 0]] → J^T = -J → 에너지 보존 수학적 보장.\n    나머지 차원은 불변.\n    \"\"\"\n\n    def __init__(self, omega: float, axis: tuple = (0, 1)):\n        self.omega = omega\n        self.axis = axis\n\n    def rotate(self, v: np.ndarray, dt: float) -> np.ndarray:\n        theta = self.omega * dt\n        v_rot = v.copy()\n        i, j = self.axis\n        c, s = np.cos(theta), np.sin(theta)\n        vi, vj = v[i], v[j]\n        v_rot[i] = c * vi - s * vj\n        v_rot[j] = s * vi + c * vj\n        return v_rot\n\n    def check_skew(self) -> bool:\n        \"\"\"J^T = -J 인가? CoriolisGauge는 구조적으로 항상 True.\"\"\"\n        return True\n\n\nclass NullGauge:\n    \"\"\"회전 없음. Strang splitting의 R 스텝이 no-op.\"\"\"\n\n    def rotate(self, v: np.ndarray, dt: float) -> np.ndarray:\n        return v\n\n    def check_skew(self) -> bool:\n        return True\n\n\n# ================================================================== #\n#  Thermo Layer\n# ================================================================== #\n\nclass LangevinThermo:\n    \"\"\"Langevin 소산 + 요동: O-U exact step\n\n    v → e^{-γh} v + amp(h)·ξ\n\n    amp(h) = σ √((1 - e^{-2γh}) / (2γ)),  γ→0: σ√h\n\n    FDT: σ² = 2γT/m  (temperature 설정 시)\n    Manual: noise_sigma_override > 0 이면 σ 직접 지정\n    Off: 둘 다 없으면 σ = 0\n    \"\"\"\n\n    def __init__(\n        self,\n        gamma: float = 0.0,\n        temperature: Optional[float] = None,\n        mass: float = 1.0,\n        noise_sigma_override: float = 0.0,\n    ):\n        self._gamma = float(gamma)\n        self._temperature = temperature\n        self._mass = float(mass)\n        self._noise_sigma_override = float(noise_sigma_override)\n\n    @property\n    def gamma(self) -> float:\n        return self._gamma\n\n    @property\n    def sigma(self) -> float:\n        if self._noise_sigma_override > 0:\n            return self._noise_sigma_override\n        if self._temperature is not None and self._temperature > 0 and self._gamma > 0:\n            return float(np.sqrt(2.0 * self._gamma * self._temperature / self._mass))\n        return 0.0\n\n    @property\n    def noise_mode(self) -> str:\n        if self._noise_sigma_override > 0:\n            return \"manual\"\n        if self._temperature is not None and self._temperature > 0 and self._gamma > 0:\n            return \"fdt\"\n        return \"off\"\n\n    @property\n    def temperature(self) -> Optional[float]:\n        return self._temperature\n\n    @property\n    def mass(self) -> float:\n        return self._mass\n\n    def ou_step(self, v: np.ndarray, h: float, rng: np.random.Generator) -> np.ndarray:\n        \"\"\"O-U exact step for time interval h.\"\"\"\n        sigma = self.sigma\n        gamma = self._gamma\n\n        decay = np.exp(-gamma * h) if gamma > 0 else 1.0\n        v_new = v * decay\n\n        if sigma > 0:\n            if gamma > 0:\n                amp = sigma * np.sqrt((1.0 - np.exp(-2.0 * gamma * h)) / (2.0 * gamma))\n            else:\n                amp = sigma * np.sqrt(h)\n            v_new = v_new + amp * rng.standard_normal(v.shape)\n\n        return v_new\n\n    def check_fdt(self) -> bool:\n        \"\"\"σ² = 2γT/m 인지 검증. manual이면 FDT 미적용.\"\"\"\n        if self.noise_mode == \"manual\":\n            return True\n        if self.noise_mode == \"off\":\n            return True\n        expected = np.sqrt(2.0 * self._gamma * self._temperature / self._mass)\n        return abs(self.sigma - expected) < 1e-12\n\n\nclass NullThermo:\n    \"\"\"소산/요동 없음. 결정론적 보존계.\"\"\"\n\n    gamma = 0.0\n    sigma = 0.0\n    noise_mode = \"off\"\n    temperature = None\n    mass = 1.0\n\n    def ou_step(self, v: np.ndarray, h: float, rng: np.random.Generator) -> np.ndarray:\n        return v\n\n    def check_fdt(self) -> bool:\n        return True\n\n\n# ================================================================== #\n#  극한 일관성 자동 검증 (TrunkChecker)\n# ================================================================== #\n\nclass TrunkChecker:\n    \"\"\"줄기의 물리적 무결성을 검증한다.\n\n    4대 체크:\n      A. conservation — γ=0, σ=0, I=0 → dE ≈ 0\n      B. skew        — J^T = -J  (gauge가 에너지를 만들지 않는가)\n      C. fdt         — σ² = 2γT/m  (열적 일관성)\n      D. dimensions  — state 크기와 layer 출력 크기 정합\n\n    A는 시뮬레이션이 필요하므로 명시적 호출.\n    B, C, D는 생성 시 자동 실행 가능.\n    \"\"\"\n\n    @staticmethod\n    def check_skew(gauge_layer) -> dict:\n        \"\"\"게이지 레이어의 스큐 대칭성 검증.\"\"\"\n        ok = gauge_layer.check_skew()\n        return {\"check\": \"skew_symmetry\", \"pass\": ok,\n                \"detail\": \"J^T = -J (energy-preserving)\" if ok else \"WARNING: gauge may break energy conservation\"}\n\n    @staticmethod\n    def check_fdt(thermo_layer) -> dict:\n        \"\"\"열역학 레이어의 FDT 일관성 검증.\"\"\"\n        ok = thermo_layer.check_fdt()\n        return {\"check\": \"fdt_consistency\", \"pass\": ok,\n                \"detail\": f\"mode={thermo_layer.noise_mode}, σ={thermo_layer.sigma:.6f}, γ={thermo_layer.gamma:.4f}\"}\n\n    @staticmethod\n    def check_dimensions(state_dim: int, force_layers: list, gauge_layer, thermo_layer) -> dict:\n        \"\"\"차원 정합성 검증.\"\"\"\n        x_test = np.zeros(state_dim)\n        v_test = np.zeros(state_dim)\n        rng = np.random.default_rng(0)\n\n        errors = []\n        for i, fl in enumerate(force_layers):\n            try:\n                f = fl.force(x_test, v_test, 0.0)\n                if len(f) != state_dim:\n                    errors.append(f\"force_layer[{i}]: output dim {len(f)} != state dim {state_dim}\")\n            except Exception as e:\n                errors.append(f\"force_layer[{i}]: {e}\")\n\n        try:\n            v_rot = gauge_layer.rotate(v_test, 0.01)\n            if len(v_rot) != state_dim:\n                errors.append(f\"gauge_layer: output dim {len(v_rot)} != state dim {state_dim}\")\n        except Exception as e:\n            errors.append(f\"gauge_layer: {e}\")\n\n        try:\n            v_ou = thermo_layer.ou_step(v_test, 0.01, rng)\n            if len(v_ou) != state_dim:\n                errors.append(f\"thermo_layer: output dim {len(v_ou)} != state dim {state_dim}\")\n        except Exception as e:\n            errors.append(f\"thermo_layer: {e}\")\n\n        ok = len(errors) == 0\n        return {\"check\": \"dimensions\", \"pass\": ok,\n                \"detail\": \"all layers agree on dim\" if ok else \"; \".join(errors)}\n\n    @staticmethod\n    def check_conservation(engine, initial_state, n_steps: int = 500) -> dict:\n        \"\"\"에너지 보존 검증 (보존계 극한).\n\n        원본 engine의 thermo를 NullThermo로, injection forces를 제거한 뒤\n        에너지 drift를 측정한다. 기존 engine을 변경하지 않는다.\n\n        이 검증은 비용이 높으므로 명시적 호출만.\n        \"\"\"\n        from copy import deepcopy\n\n        eng_copy = deepcopy(engine)\n        eng_copy._thermo = NullThermo()\n        eng_copy._force_layers = [fl for fl in eng_copy._force_layers\n                                  if isinstance(fl, GradientForce)]\n\n        state = initial_state.copy(deep=False)\n        E0 = state.energy\n        energies = [E0]\n\n        for _ in range(n_steps):\n            state = eng_copy.update(state)\n            energies.append(state.energy)\n\n        energies = np.array(energies)\n        max_drift = float(np.max(np.abs(energies - E0)))\n        rel_drift = max_drift / abs(E0) if abs(E0) > 1e-12 else max_drift\n\n        ok = rel_drift < 0.01\n        return {\"check\": \"conservation\", \"pass\": ok,\n                \"detail\": f\"max |ΔE|/E₀ = {rel_drift:.2e} (n={n_steps})\"}\n\n    @staticmethod\n    def run_all(engine, initial_state=None) -> list:\n        \"\"\"모든 정적 체크 실행. conservation은 initial_state가 있을 때만.\"\"\"\n        results = []\n        results.append(TrunkChecker.check_skew(engine._gauge))\n        results.append(TrunkChecker.check_fdt(engine._thermo))\n\n        if initial_state is not None:\n            dim = len(initial_state.state_vector) // 2\n            results.append(TrunkChecker.check_dimensions(\n                dim, engine._force_layers, engine._gauge, engine._thermo))\n            results.append(TrunkChecker.check_conservation(engine, initial_state))\n\n        return results\n"
    },
    "previous_hash": "0",
    "hash": "db63fbb166d66f748c9d8b5ee04e74a0a79b771554f086598c4bd863d0b833a5"
  }
]